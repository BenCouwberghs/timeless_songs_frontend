<div class="w-full max-w-screen-md mx-auto px-4">
  <p-fluid class="p-4">

    <p-confirmdialog></p-confirmdialog>

    <form (ngSubmit)="onSave()" class="flex flex-col gap-4">

      @if(update) {
      <div class="text-center">
        <h2 class="text-2xl font-bold text-gray-800">Song form</h2>
        <p class="text-sm text-gray-500 mt-1">Update the details below and click Modify.
          Click Delete if you want to delete this song.</p>
      </div>
      }

      @else {
      <div class="text-center">
        <h2 class="text-2xl font-bold text-gray-800">Song form</h2>
        <p class="text-sm text-gray-500 mt-1">Fill in the details below and click Add.</p>
      </div>
      }

      <div>
        <label class="block mb-1 font-medium">Band</label>
        <p-select id="band" name="band" [autofocus]="true" [options]="bands" [(ngModel)]="song.band" optionLabel="name"
                  placeholder="Select a band" [filter]="true" filterBy="name" class="w-full"></p-select>
      </div>

      <div>
        <label for="name" class="block mb-1 font-medium">Name</label>
        <input pInputText id="name" name="name" [(ngModel)]="song.name"/>
      </div>

      <div>
        <label for="year" class="block mb-1 font-medium">Year</label>
        <input pInputText id="year" name="year" [(ngModel)]="song.year"/>
      </div>

      <div>
        <label for="linkwikipage" class="block mb-1 font-medium">Link to Wikipedia page</label>

        <p-inputgroup>
          <p-inputgroup-addon>www</p-inputgroup-addon>
          <input pInputText id="linkwikipage" name="linkWikiPage" [(ngModel)]="song.wikiLinkPage"
                 placeholder="link to wikipedia page"/>
        </p-inputgroup>
      </div>

      <div>
        <label class="block mb-1 font-medium">
          Youtube code
          <i class="pi pi-search" (click)="show()"></i>
        </label>
        @if (song.youTubeClipCode) {
        <div class="w-full max-w-xl aspect-video">
          <app-song-player
            [clipCode]="song.youTubeClipCode"
          ></app-song-player>
        </div>
        }
      </div>

      <div>
        <label class="block mb-1 font-medium">rating</label>
        <p-rating name="rating" [(ngModel)]="song.rating"></p-rating>
      </div>

      <div>
        <p-multiselect name="genre" [options]="genres" [(ngModel)]="song.genres" placeholder="Select genres"
                       optionLabel="description" optionValue="id" display="chip" class="w-full md:w-80">
        </p-multiselect>
      </div>

      @if (update) {
      <div class="flex justify-end space-x-3 pt-4">
        <p-button type="button" styleClass="p-button-secondary" (click)="onCancel()" label="Cancel"></p-button>
        <p-button type="submit" styleClass="p-button-primary" label="Modify"></p-button>
        <p-button type="button" styleClass="p-button-danger" (click)="deleteEvent($event)" label="Delete"></p-button>
      </div>
      }

      @else {
      <div class="flex justify-end space-x-3 pt-4">
        <p-button type="button" styleClass="p-button-secondary" (click)="onCancel()" label="Cancel"></p-button>
        <p-button type="submit" styleClass="p-button-primary" label="Add"></p-button>
      </div>
      }

    </form>
  </p-fluid>
</div>
