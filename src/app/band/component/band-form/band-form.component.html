<div class="w-full max-w-screen-md mx-auto px-4">
  <p-fluid class="p-4">

    <p-confirmdialog></p-confirmdialog>

    <form (ngSubmit)="onSave()" class="flex flex-col gap-4">

      @if(update) {
      <div class="text-center">
        <h2 class="text-2xl font-bold text-gray-800">Band form</h2>
        <p class="text-sm text-gray-500 mt-1">Update the details below and click Modify.
          Click Delete if you want to delete this band.</p>
      </div>
      }

      @else {
      <div class="text-center">
        <h2 class="text-2xl font-bold text-gray-800">Band form</h2>
        <p class="text-sm text-gray-500 mt-1">Fill in the details below and click Add.</p>
      </div>
      }

      <div>
        <label for="name" class="block mb-1 font-medium">Name</label>
        <input pInputText id="name" name="name" [(ngModel)]="band.name"/>
      </div>
      <div>
        <label for="linkwikipage" class="block mb-1 font-medium">Link to Wikipedia page</label>

        <p-inputgroup>
          <p-inputgroup-addon>www</p-inputgroup-addon>
          <input pInputText id="linkwikipage" name="linkWikiPage" [(ngModel)]="band.linkWikiPage"
                 placeholder="link to wikipedia page"/>
        </p-inputgroup>
      </div>
      <div>
        <label for="comments" class="block mb-1 font-medium">Comments</label>
        <textarea pTextarea id="comments" name="comments" [(ngModel)]="band.comments" class="w-full"></textarea>
      </div>

      <div>
        <label class="block mb-1 font-medium">Pinned</label>
        <p-toggleswitch name="pinned" [(ngModel)]="band.pinned"></p-toggleswitch>
      </div>

      @if (update) {
      <div class="flex justify-end space-x-3 pt-4">
        <p-button type="button" styleClass="p-button-secondary" (click)="onCancel()" label="Cancel"></p-button>
        <p-button type="submit" styleClass="p-button-primary" label="Modify"></p-button>
        <p-button type="button" styleClass="p-button-danger" (click)="deleteEvent($event)" label="Delete"></p-button>
      </div>
      }

      @else {
      <div class="flex justify-end space-x-3 pt-4">
        <p-button type="button" styleClass="p-button-secondary" (click)="onCancel()" label="Cancel"></p-button>
        <p-button type="submit" styleClass="p-button-primary" label="Add"></p-button>
      </div>
      }
    </form>

    @if(update) {
      <ul class="divide-y divide-gray-200">
        @for (song of band.songs; track song) {
        <li class="flex justify-between py-2">
          <a
            [routerLink]="['/song-form', song.id]"
            class="flex p-4 hover:bg-gray-100 text-blue-600"
          >
            <span>{{ song.name }}</span>
          </a>
        </li>
        }
      </ul>
    }
  </p-fluid>
</div>
